# 管理员API文档

本文档详细列出了商城系统中与管理员相关的所有API，包括用户管理、店铺管理、分类管理、公告管理以及客服管理等功能。

## 认证

管理员API需要管理员权限才能访问。请在请求头中添加`Authorization`字段，值为`Bearer {token}`。

## API列表

### 一、用户管理

#### 1. 获取所有用户列表

##### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/admin/users`
- 权限：管理员

##### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "id": 1,
      "username": "admin",
      "email": "admin@example.com",
      "role": "ADMIN",
      "status": 1,
      "createTime": "2023-01-01T00:00:00"
    },
    {
      "id": 2,
      "username": "user1",
      "email": "user1@example.com",
      "role": "USER",
      "status": 1,
      "createTime": "2023-01-02T00:00:00"
    }
    // 更多用户...
  ]
}
```

##### 测试用例

- **用例1**：管理员获取所有用户列表
  - 请求：`GET http://localhost:8080/api/admin/users`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回所有用户列表

- **用例2**：非管理员获取所有用户列表
  - 请求：`GET http://localhost:8080/api/admin/users`
  - 请求头：`Authorization: Bearer {普通用户token}`
  - 预期结果：返回403错误，提示无权限

#### 2. 按角色获取用户列表

##### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/admin/users/role`
- 权限：管理员
- 参数：
  - `role`：用户角色，查询参数

##### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "id": 2,
      "username": "user1",
      "email": "user1@example.com",
      "role": "USER",
      "status": 1,
      "createTime": "2023-01-02T00:00:00"
    },
    {
      "id": 3,
      "username": "user2",
      "email": "user2@example.com",
      "role": "USER",
      "status": 1,
      "createTime": "2023-01-03T00:00:00"
    }
    // 更多指定角色的用户...
  ]
}
```

##### 测试用例

- **用例1**：获取普通用户列表
  - 请求：`GET http://localhost:8080/api/admin/users/role?role=USER`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回所有普通用户列表

- **用例2**：获取商家用户列表
  - 请求：`GET http://localhost:8080/api/admin/users/role?role=MERCHANT`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回所有商家用户列表

### 二、店铺管理

#### 1. 获取所有店铺列表

##### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/admin/stores`
- 权限：管理员

##### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "id": 1,
      "name": "电子产品店",
      "userId": 2,
      "description": "专营各类电子产品",
      "status": 1,
      "createTime": "2023-01-10T00:00:00"
    },
    {
      "id": 2,
      "name": "服装店",
      "userId": 3,
      "description": "时尚服装店铺",
      "status": 1,
      "createTime": "2023-01-12T00:00:00"
    }
    // 更多店铺...
  ]
}
```

##### 测试用例

- **用例1**：管理员获取所有店铺列表
  - 请求：`GET http://localhost:8080/api/admin/stores`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回所有店铺列表

#### 2. 获取待审核店铺列表

##### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/admin/stores/pending`或`http://localhost:8080/api/stores/pending`
- 权限：管理员

##### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "id": 3,
      "name": "新电器店",
      "userId": 4,
      "description": "各类家用电器",
      "status": 0,
      "createTime": "2023-01-15T00:00:00"
    },
    {
      "id": 4,
      "name": "食品店",
      "userId": 5,
      "description": "健康食品专卖",
      "status": 0,
      "createTime": "2023-01-16T00:00:00"
    }
    // 更多待审核店铺...
  ]
}
```

##### 测试用例

- **用例1**：管理员获取待审核店铺列表
  - 请求：`GET http://localhost:8080/api/admin/stores/pending`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回所有待审核的店铺列表
  
- **用例2**：使用另一个URL路径获取待审核店铺列表
  - 请求：`GET http://localhost:8080/api/stores/pending`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回所有待审核的店铺列表

#### 3. 审核店铺

##### 请求

- 方法：`PUT`
- URL：`http://localhost:8080/api/admin/stores/{id}/status`或`http://localhost:8080/api/stores/{id}/status`
- 权限：管理员
- 参数：
  - `id`：店铺ID，路径参数
  - `status`：状态(0-审核中, 1-正常, 2-关闭)，查询参数

##### 响应

```json
{
  "code": 200,
  "msg": "店铺审核通过",
  "data": true
}
```

##### 测试用例

- **用例1**：审核通过店铺
  - 请求：`PUT http://localhost:8080/api/admin/stores/3/status?status=1`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回成功信息，提示店铺审核通过

- **用例2**：关闭店铺
  - 请求：`PUT http://localhost:8080/api/stores/2/status?status=2`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回成功信息，提示店铺已关闭

- **用例3**：非管理员尝试审核店铺
  - 请求：`PUT http://localhost:8080/api/stores/3/status?status=1`
  - 请求头：`Authorization: Bearer {普通用户token}`
  - 预期结果：返回403错误，提示无权限

#### 4. 删除店铺

##### 请求

- 方法：`DELETE`
- URL：`http://localhost:8080/api/stores/{id}`
- 权限：管理员
- 参数：
  - `id`：店铺ID，路径参数

##### 响应

```json
{
  "code": 200,
  "msg": "店铺删除成功",
  "data": true
}
```

##### 测试用例

- **用例1**：管理员删除店铺
  - 请求：`DELETE http://localhost:8080/api/stores/3`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回成功信息，提示店铺删除成功

- **用例2**：非管理员尝试删除店铺
  - 请求：`DELETE http://localhost:8080/api/stores/3`
  - 请求头：`Authorization: Bearer {普通用户token}`
  - 预期结果：返回403错误，提示无权限

### 三、商品管理

#### 1. 添加商品

##### 请求

- 方法：`POST`
- URL：`http://localhost:8080/api/products`
- 权限：管理员
- 请求体：

```json
{
  "name": "OPPO Find X5",
  "storeId": 4,
  "categoryId": 3,
  "price": 4599.00,
  "stock": 150,
  "description": "OPPO旗舰手机",
  "images": "[\"image7.jpg\", \"image8.jpg\"]",
  "detail": "<p>OPPO Find X5详细描述</p>",
  "specifications": "{\"颜色\":\"白色\",\"内存\":\"256G\"}",
  "status": 1
}
```

##### 响应

```json
{
  "code": 200,
  "msg": "添加商品成功",
  "data": {
    "id": 4,
    "name": "OPPO Find X5",
    "storeId": 4,
    "categoryId": 3,
    "price": 4599.00,
    "stock": 150,
    "description": "OPPO旗舰手机",
    "images": "[\"image7.jpg\", \"image8.jpg\"]",
    "detail": "<p>OPPO Find X5详细描述</p>",
    "specifications": "{\"颜色\":\"白色\",\"内存\":\"256G\"}",
    "status": 1,
    "sales": 0,
    "rating": 5.0,
    "createTime": "2023-01-10T09:00:00",
    "updateTime": "2023-01-10T09:00:00"
  }
}
```

##### 测试用例

- **用例1**：管理员添加商品
  - 请求：`POST http://localhost:8080/api/products`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "name": "OPPO Find X5",
      "storeId": 4,
      "categoryId": 3,
      "price": 4599.00,
      "stock": 150,
      "description": "OPPO旗舰手机",
      "images": "[\"image7.jpg\", \"image8.jpg\"]",
      "detail": "<p>OPPO Find X5详细描述</p>",
      "specifications": "{\"颜色\":\"白色\",\"内存\":\"256G\"}",
      "status": 1
    }
    ```
  - 预期结果：添加成功，返回新添加的商品信息

- **用例2**：添加商品信息不完整
  - 请求：`POST http://localhost:8080/api/products`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "name": "测试商品",
      "price": 1000.00
    }
    ```
  - 预期结果：添加失败，返回错误信息（缺少必要字段）

#### 2. 更新商品

##### 请求

- 方法：`PUT`
- URL：`http://localhost:8080/api/products/{id}`
- 权限：管理员
- 参数：
  - `id`：商品ID，路径参数
- 请求体：

```json
{
  "name": "iPhone 13 Pro",
  "price": 7999.00,
  "stock": 50,
  "description": "苹果最新款专业版手机",
  "status": 1
}
```

##### 响应

```json
{
  "code": 200,
  "msg": "更新商品成功",
  "data": {
    "id": 1,
    "name": "iPhone 13 Pro",
    "storeId": 1,
    "categoryId": 3,
    "price": 7999.00,
    "stock": 50,
    "description": "苹果最新款专业版手机",
    "images": "[\"image1.jpg\", \"image2.jpg\"]",
    "detail": "<p>详细描述</p>",
    "specifications": "{\"颜色\":\"黑色\",\"内存\":\"128G\"}",
    "status": 1,
    "sales": 50,
    "rating": 4.8,
    "createTime": "2023-01-01T12:00:00",
    "updateTime": "2023-01-10T11:30:00"
  }
}
```

##### 测试用例

- **用例1**：管理员更新商品名称和价格
  - 请求：`PUT http://localhost:8080/api/products/1`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "name": "iPhone 13 Pro",
      "price": 7999.00
    }
    ```
  - 预期结果：更新成功，返回更新后的商品信息

- **用例2**：更新商品状态（下架）
  - 请求：`PUT http://localhost:8080/api/products/1`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "status": 0
    }
    ```
  - 预期结果：更新成功，返回更新后的商品信息（状态为0）

- **用例3**：更新不存在的商品
  - 请求：`PUT http://localhost:8080/api/products/999`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "name": "测试商品",
      "price": 1000.00
    }
    ```
  - 预期结果：更新失败，返回商品不存在的错误信息

#### 3. 删除商品

##### 请求

- 方法：`DELETE`
- URL：`http://localhost:8080/api/products/{id}`
- 权限：管理员
- 参数：
  - `id`：商品ID，路径参数

##### 响应

```json
{
  "code": 200,
  "msg": "删除商品成功",
  "data": true
}
```

##### 测试用例

- **用例1**：管理员删除商品
  - 请求：`DELETE http://localhost:8080/api/products/2`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：删除成功，返回true

- **用例2**：删除不存在的商品
  - 请求：`DELETE http://localhost:8080/api/products/999`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：删除失败，返回商品不存在的错误信息

### 四、客服管理

#### 1. 获取所有店铺的客服满意度统计

##### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/admin/customer-service/stats`或`http://localhost:8080/api/customer-service/rating/stats`
- 权限：管理员

##### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "storeId": 1,
      "storeName": "电子产品店",
      "averageRating": 4.5,
      "sessionCount": 120
    },
    {
      "storeId": 2,
      "storeName": "服装店",
      "averageRating": 4.2,
      "sessionCount": 85
    }
    // 更多店铺的客服满意度...
  ]
}
```

##### 测试用例

- **用例1**：管理员获取客服满意度统计
  - 请求：`GET http://localhost:8080/api/admin/customer-service/stats`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回所有店铺的客服满意度统计

- **用例2**：使用另一个URL路径获取客服满意度统计
  - 请求：`GET http://localhost:8080/api/customer-service/rating/stats`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回所有店铺的客服满意度统计

#### 2. 获取满意度低于指定值的店铺

##### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/admin/customer-service/low-rating`
- 权限：管理员
- 参数：
  - `threshold`：满意度阈值，查询参数

##### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "storeId": 3,
      "storeName": "数码店",
      "averageRating": 3.2,
      "sessionCount": 45
    },
    {
      "storeId": 5,
      "storeName": "五金店",
      "averageRating": 3.5,
      "sessionCount": 30
    }
    // 更多满意度低于阈值的店铺...
  ]
}
```

##### 测试用例

- **用例1**：获取满意度低于4.0的店铺
  - 请求：`GET http://localhost:8080/api/admin/customer-service/low-rating?threshold=4.0`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回所有满意度低于4.0的店铺列表

#### 3. 获取指定店铺的客服满意度详情

##### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/admin/customer-service/store/{storeId}`
- 权限：管理员
- 参数：
  - `storeId`：店铺ID，路径参数

##### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "storeId": 1,
    "storeName": "电子产品店",
    "averageRating": 4.5,
    "sessionCount": 120,
    "responseTime": 45
  }
}
```

##### 测试用例

- **用例1**：获取指定店铺的客服详情
  - 请求：`GET http://localhost:8080/api/admin/customer-service/store/1`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回指定店铺的客服满意度详情

- **用例2**：获取不存在店铺的客服详情
  - 请求：`GET http://localhost:8080/api/admin/customer-service/store/999`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回错误信息，提示店铺不存在

#### 4. 获取客服会话投诉列表

##### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/admin/customer-service/complaints`
- 权限：管理员

##### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "sessionId": 10,
      "userId": 5,
      "storeId": 2,
      "storeName": "服装店",
      "complaintContent": "客服态度恶劣",
      "status": 0,
      "createTime": "2023-02-01T10:30:00"
    },
    {
      "sessionId": 15,
      "userId": 8,
      "storeId": 3,
      "storeName": "数码店",
      "complaintContent": "客服回复慢",
      "status": 0,
      "createTime": "2023-02-02T14:20:00"
    }
    // 更多投诉...
  ]
}
```

##### 测试用例

- **用例1**：获取客服投诉列表
  - 请求：`GET http://localhost:8080/api/admin/customer-service/complaints`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回所有客服会话投诉列表

#### 5. 处理客服投诉

##### 请求

- 方法：`POST`
- URL：`http://localhost:8080/api/customer-service/complaints/{sessionId}`
- 权限：管理员
- 参数：
  - `sessionId`：会话ID，路径参数
- 请求体：

```json
{
  "status": 1,
  "handlerComment": "已联系客服进行培训，给予用户补偿积分",
  "result": "已解决"
}
```

##### 响应

```json
{
  "code": 200,
  "msg": "投诉处理成功",
  "data": true
}
```

##### 测试用例

- **用例1**：处理客服投诉
  - 请求：`POST http://localhost:8080/api/customer-service/complaints/10`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "status": 1,
      "handlerComment": "已联系客服进行培训，给予用户补偿积分",
      "result": "已解决"
    }
    ```
  - 预期结果：返回成功信息，提示投诉处理成功

### 五、分类管理

#### 1. 添加分类

##### 请求

- 方法：`POST`
- URL：`http://localhost:8080/api/categories`
- 权限：管理员
- 请求体：

```json
{
  "name": "新分类",
  "parentId": 1,
  "status": 1,
  "sortOrder": 3
}
```

##### 响应

```json
{
  "code": 200,
  "msg": "添加分类成功",
  "data": {
    "id": 7,
    "name": "新分类",
    "parentId": 1,
    "level": 2,
    "status": 1,
    "sortOrder": 3
  }
}
```

##### 测试用例

- **用例1**：管理员添加新分类
  - 请求：`POST http://localhost:8080/api/categories`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "name": "平板电脑",
      "parentId": 1,
      "status": 1,
      "sortOrder": 3
    }
    ```
  - 预期结果：添加成功，返回新添加的分类信息

- **用例2**：添加重名分类
  - 请求：`POST http://localhost:8080/api/categories`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "name": "手机",
      "parentId": 1,
      "status": 1
    }
    ```
  - 预期结果：添加失败，返回错误信息（该分类名称已存在）

- **用例3**：非管理员添加分类
  - 请求：`POST http://localhost:8080/api/categories`
  - 请求头：`Authorization: Bearer {普通用户token}`
  - 请求体：
    ```json
    {
      "name": "测试分类",
      "parentId": 0
    }
    ```
  - 预期结果：返回403错误，提示无权限

#### 2. 更新分类

##### 请求

- 方法：`PUT`
- URL：`http://localhost:8080/api/categories/{id}`
- 权限：管理员
- 参数：
  - `id`：分类ID，路径参数
- 请求体：

```json
{
  "name": "更新后的分类名",
  "parentId": 2,
  "status": 1,
  "sortOrder": 5
}
```

##### 响应

```json
{
  "code": 200,
  "msg": "更新分类成功",
  "data": {
    "id": 3,
    "name": "更新后的分类名",
    "parentId": 2,
    "level": 2,
    "status": 1,
    "sortOrder": 5
  }
}
```

##### 测试用例

- **用例1**：更新分类名称
  - 请求：`PUT http://localhost:8080/api/categories/3`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "name": "智能手机"
    }
    ```
  - 预期结果：更新成功，返回更新后的分类信息

- **用例2**：更新分类的父分类
  - 请求：`PUT http://localhost:8080/api/categories/3`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "parentId": 2
    }
    ```
  - 预期结果：更新成功，返回更新后的分类信息，level会相应更新

- **用例3**：更新不存在的分类
  - 请求：`PUT http://localhost:8080/api/categories/999`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "name": "测试分类"
    }
    ```
  - 预期结果：更新失败，返回分类不存在的错误信息

#### 3. 删除分类

##### 请求

- 方法：`DELETE`
- URL：`http://localhost:8080/api/categories/{id}`
- 权限：管理员
- 参数：
  - `id`：分类ID，路径参数

##### 响应

```json
{
  "code": 200,
  "msg": "删除分类成功",
  "data": true
}
```

##### 测试用例

- **用例1**：删除叶子节点分类
  - 请求：`DELETE http://localhost:8080/api/categories/6`（假设6是叶子节点）
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：删除成功，返回true

- **用例2**：删除有子分类的分类
  - 请求：`DELETE http://localhost:8080/api/categories/1`（假设1有子分类）
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：删除失败，返回错误信息（请先删除子分类）

- **用例3**：删除有关联商品的分类
  - 请求：`DELETE http://localhost:8080/api/categories/3`（假设3有关联商品）
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：删除失败，返回错误信息（该分类下存在商品，无法删除）

### 六、公告管理

#### 1. 获取所有公告（管理员）

##### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/announcements/admin`
- 权限：管理员

##### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "id": 1,
      "title": "系统维护通知",
      "content": "系统将于2023年3月1日进行维护升级",
      "publisherId": 1,
      "status": 1,
      "createTime": "2023-02-25T00:00:00"
    },
    {
      "id": 2,
      "title": "优惠活动",
      "content": "春节大促销，全场商品8折",
      "publisherId": 1,
      "status": 0,
      "createTime": "2023-02-26T00:00:00"
    }
    // 更多公告...
  ]
}
```

##### 测试用例

- **用例1**：管理员获取所有公告
  - 请求：`GET http://localhost:8080/api/announcements/admin`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：返回所有公告列表，包括已显示和未显示的

- **用例2**：非管理员尝试获取所有公告
  - 请求：`GET http://localhost:8080/api/announcements/admin`
  - 请求头：`Authorization: Bearer {普通用户token}`
  - 预期结果：返回403错误，提示无权限

#### 2. 添加公告

##### 请求

- 方法：`POST`
- URL：`http://localhost:8080/api/announcements`
- 权限：管理员
- 请求体：

```json
{
  "title": "新公告标题",
  "content": "新公告内容",
  "status": 1
}
```

##### 响应

```json
{
  "code": 200,
  "msg": "添加公告成功",
  "data": {
    "id": 3,
    "title": "新公告标题",
    "content": "新公告内容",
    "publisherId": 1,
    "status": 1,
    "createTime": "2023-03-01T10:00:00"
  }
}
```

##### 测试用例

- **用例1**：管理员添加公告
  - 请求：`POST http://localhost:8080/api/announcements`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "title": "系统升级通知",
      "content": "系统将于下周升级，届时将暂停服务2小时",
      "status": 1
    }
    ```
  - 预期结果：添加成功，返回新添加的公告信息

- **用例2**：非管理员尝试添加公告
  - 请求：`POST http://localhost:8080/api/announcements`
  - 请求头：`Authorization: Bearer {普通用户token}`
  - 请求体：
    ```json
    {
      "title": "测试公告",
      "content": "测试内容"
    }
    ```
  - 预期结果：返回403错误，提示无权限

#### 3. 更新公告

##### 请求

- 方法：`PUT`
- URL：`http://localhost:8080/api/announcements/{id}`
- 权限：管理员
- 参数：
  - `id`：公告ID，路径参数
- 请求体：

```json
{
  "title": "更新后的公告标题",
  "content": "更新后的公告内容",
  "status": 0
}
```

##### 响应

```json
{
  "code": 200,
  "msg": "更新公告成功",
  "data": {
    "id": 1,
    "title": "更新后的公告标题",
    "content": "更新后的公告内容",
    "publisherId": 1,
    "status": 0,
    "createTime": "2023-02-25T00:00:00"
  }
}
```

##### 测试用例

- **用例1**：更新公告内容
  - 请求：`PUT http://localhost:8080/api/announcements/1`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "content": "更新后的系统维护通知内容"
    }
    ```
  - 预期结果：更新成功，返回更新后的公告信息

- **用例2**：更新公告状态
  - 请求：`PUT http://localhost:8080/api/announcements/1`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "status": 0
    }
    ```
  - 预期结果：更新成功，返回更新后的公告信息

- **用例3**：更新不存在的公告
  - 请求：`PUT http://localhost:8080/api/announcements/999`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 请求体：
    ```json
    {
      "title": "测试公告"
    }
    ```
  - 预期结果：更新失败，返回公告不存在的错误信息

#### 4. 删除公告

##### 请求

- 方法：`DELETE`
- URL：`http://localhost:8080/api/announcements/{id}`
- 权限：管理员
- 参数：
  - `id`：公告ID，路径参数

##### 响应

```json
{
  "code": 200,
  "msg": "删除公告成功",
  "data": true
}
```

##### 测试用例

- **用例1**：删除存在的公告
  - 请求：`DELETE http://localhost:8080/api/announcements/2`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：删除成功，返回true

- **用例2**：删除不存在的公告
  - 请求：`DELETE http://localhost:8080/api/announcements/999`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：删除失败，返回公告不存在的错误信息

- **用例3**：非管理员尝试删除公告
  - 请求：`DELETE http://localhost:8080/api/announcements/1`
  - 请求头：`Authorization: Bearer {普通用户token}`
  - 预期结果：返回403错误，提示无权限

#### 5. 更新公告状态

##### 请求

- 方法：`PUT`
- URL：`http://localhost:8080/api/announcements/{id}/status`
- 权限：管理员
- 参数：
  - `id`：公告ID，路径参数
  - `status`：状态(0-隐藏, 1-显示)，查询参数

##### 响应

```json
{
  "code": 200,
  "msg": "更新公告状态成功",
  "data": true
}
```

##### 测试用例

- **用例1**：显示公告
  - 请求：`PUT http://localhost:8080/api/announcements/2/status?status=1`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：更新成功，返回true

- **用例2**：隐藏公告
  - 请求：`PUT http://localhost:8080/api/announcements/1/status?status=0`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：更新成功，返回true

- **用例3**：更新不存在公告的状态
  - 请求：`PUT http://localhost:8080/api/announcements/999/status?status=1`
  - 请求头：`Authorization: Bearer {管理员token}`
  - 预期结果：更新失败，返回公告不存在的错误信息

## 错误码说明

- 200: 操作成功
- 400: 请求参数错误
- 401: 未认证或token过期
- 403: 无权操作
- 404: 资源不存在
- 500: 服务器内部错误

## 测试环境

- 测试基础URL: `http://localhost:8080/api`
- 管理员账号: admin/password
- 普通用户账号: user/password
- 商家账号: merchant/password
