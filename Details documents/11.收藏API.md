# 收藏API文档

本文档详细介绍商城系统中与收藏相关的所有API，包括添加、取消、获取收藏列表等操作。

## 1. 添加收藏

### 请求

- 方法：`POST`
- URL：`http://localhost:8080/api/favorites`
- 权限：已登录用户
- 请求体：

```json
{
  "productId": 1
}
```

### 响应

```json
{
  "code": 200,
  "msg": "添加收藏成功",
  "data": {
    "id": 1,
    "userId": 100,
    "productId": 200,
    "createTime": "2024-04-07 10:00:00",
    "product": {
      "id": 200,
      "name": "商品名称",
      "price": 99.99,
      "description": "商品描述"
    }
  }
}
```

### 测试用例

- **用例1**：正常添加收藏
  - 请求：`POST http://localhost:8080/api/favorites`
    ```json
    {
      "productId": 1
    }
    ```
  - 预期结果：收藏添加成功，返回收藏信息

- **用例2**：商品不存在
  - 请求：`POST http://localhost:8080/api/favorites`
    ```json
    {
      "productId": 999
    }
    ```
  - 预期结果：返回错误信息，提示商品不存在

- **用例3**：重复收藏
  - 请求：`POST http://localhost:8080/api/favorites`
    ```json
    {
      "productId": 1
    }
    ```
  - 预期结果：返回错误信息，提示已经收藏过该商品

## 2. 取消收藏

### 请求

- 方法：`DELETE`
- URL：`http://localhost:8080/api/favorites/{productId}`
- 权限：已登录用户
- 参数：
  - `productId`：商品ID，路径参数

### 响应

```json
{
  "code": 200,
  "msg": "取消收藏成功",
  "data": true
}
```

### 测试用例

- **用例1**：取消已收藏的商品
  - 请求：`DELETE http://localhost:8080/api/favorites/1`
  - 预期结果：取消收藏成功，返回true

- **用例2**：取消未收藏的商品
  - 请求：`DELETE http://localhost:8080/api/favorites/999`
  - 预期结果：返回错误信息，提示尚未收藏该商品

## 3. 获取收藏列表

### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/favorites`
- 权限：已登录用户

### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "id": 1,
      "userId": 100,
      "productId": 200,
      "createTime": "2024-04-07 10:00:00",
      "product": {
        "id": 200,
        "name": "商品名称",
        "price": 99.99,
        "description": "商品描述"
      }
    }
  ]
}
```

### 测试用例

- **用例1**：获取用户所有收藏
  - 请求：`GET http://localhost:8080/api/favorites`
  - 预期结果：返回用户的所有收藏列表

## 4. 分页获取收藏列表

### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/favorites/page`
- 权限：已登录用户
- 参数：
  - `pageNum`：页码，默认1
  - `pageSize`：每页大小，默认10

### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "list": [
      {
        "id": 1,
        "userId": 100,
        "productId": 200,
        "createTime": "2024-04-07 10:00:00",
        "product": {
          "id": 200,
          "name": "商品名称",
          "price": 99.99,
          "description": "商品描述"
        }
      }
    ],
    "pageNum": 1,
    "pageSize": 10
  }
}
```

### 测试用例

- **用例1**：获取第一页收藏列表
  - 请求：`GET http://localhost:8080/api/favorites/page?pageNum=1&pageSize=10`
  - 预期结果：返回第一页的收藏列表

- **用例2**：获取第二页收藏列表
  - 请求：`GET http://localhost:8080/api/favorites/page?pageNum=2&pageSize=10`
  - 预期结果：返回第二页的收藏列表

## 5. 检查是否已收藏

### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/favorites/check/{productId}`
- 权限：已登录用户
- 参数：
  - `productId`：商品ID，路径参数

### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": true
}
```

### 测试用例

- **用例1**：检查已收藏的商品
  - 请求：`GET http://localhost:8080/api/favorites/check/1`
  - 预期结果：返回true，表示已收藏

- **用例2**：检查未收藏的商品
  - 请求：`GET http://localhost:8080/api/favorites/check/999`
  - 预期结果：返回false，表示未收藏

## 6. 获取商品收藏数

### 请求

- 方法：`GET`
- URL：`http://localhost:8080/api/favorites/count/{productId}`
- 权限：已登录用户
- 参数：
  - `productId`：商品ID，路径参数

### 响应

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": 42
}
```

### 测试用例

- **用例1**：获取热门商品的收藏数
  - 请求：`GET http://localhost:8080/api/favorites/count/1`
  - 预期结果：返回该商品被收藏的次数

- **用例2**：获取冷门商品的收藏数
  - 请求：`GET http://localhost:8080/api/favorites/count/999`
  - 预期结果：返回0，表示该商品未被收藏 