# 在线购物平台系统

## 项目概述

本系统是一个功能完备的现代化在线购物平台，采用Spring Boot框架开发，提供电子商务所需的全套功能。该系统支持多角色操作，包括用户购物、商家管理和平台管理，实现了从浏览商品到下单支付的完整电商流程。

## 技术栈

- **后端**：Spring Boot、Spring MVC、Spring Data JPA、MyBatis
- **安全认证**：Spring Security、JWT (JSON Web Token)
- **数据库**：MySQL 8
- **API文档**：Swagger (SpringDoc)
- **日志系统**：SLF4J + Logback
- **事务管理**：Spring Transaction
- **JSON处理**：Fastjson
- **请求验证**：Spring Validation

## 系统功能

### 1. 用户管理

#### 1.1 用户注册与登录

- 支持用户名/密码注册
- Spring Security与JWT令牌认证
- 用户身份验证
- 登录状态维护

#### 1.2 个人信息管理

- 用户资料查看与编辑
- 密码修改
- 账户安全设置

#### 1.3 地址管理

- 收货地址添加、编辑、删除
- 默认地址设置
- 地址列表查看

### 2. 商品管理

#### 2.1 商品分类

- 多级分类系统
- 分类浏览
- 分类商品展示

#### 2.2 商品浏览

- 商品列表展示
- 商品详情查看
- 商品图片展示
- 商品规格参数展示
- 相关商品推荐

#### 2.3 商品搜索

- 关键词搜索
- 分类筛选
- 价格区间筛选
- 商品排序（价格、销量、评分）
- 搜索历史记录

### 3. 购物车功能

#### 3.1 购物车管理

- 商品添加到购物车
- 购物车商品数量修改
- 购物车商品删除
- 购物车商品清空
- 购物车商品选择/取消选择

#### 3.2 收藏夹

- 商品收藏与取消
- 收藏商品列表查看
- 收藏商品移入购物车

### 4. 订单系统

#### 4.1 订单创建与管理

- 订单生成
- 订单确认
- 订单支付
- 订单取消
- 订单查询
- 订单详情查看

#### 4.2 订单状态流转

- 待付款（状态码0）
- 待发货（状态码1）
- 待收货（状态码2）
- 已完成（状态码3）
- 已取消（状态码4）
- 退款/退货处理

### 5. 店铺管理

#### 5.1 店铺信息

- 店铺基本信息展示
- 店铺商品浏览
- 店铺活动查看

#### 5.2 商家后台

- 店铺信息管理
- 商品上架/下架
- 商品信息编辑
- 订单处理
- 发货管理
- 售后处理

### 6. 评价系统

#### 6.1 商品评价

- 购买后评价
- 评分功能
- 图片上传
- 追加评价

#### 6.2 评价管理

- 评价列表查看
- 有图评价筛选
- 好评/中评/差评筛选

### 7. 客户服务

#### 7.1 在线客服

- 用户与商家在线咨询会话
- 消息记录查看
- 历史会话查询
- 实时消息收发
- 消息已读/未读状态
- 会话评价（1-5星）

#### 7.2 公告系统

- 系统公告发布
- 公告列表查看
- 公告详情浏览

### 8. 管理员功能

#### 8.1 用户管理

- 用户列表查看
- 用户状态管理
- 用户权限设置

#### 8.2 商品管理

- 商品审核
- 违规商品下架
- 商品分类管理

#### 8.3 订单管理

- 订单状态监控
- 异常订单处理
- 订单统计分析

#### 8.4 客服管理

- 客服满意度统计
- 客服投诉处理
- 平均响应时间监控

#### 8.5 系统设置

- 网站参数配置
- 权限管理
- 日志查看

## 数据模型

系统包含多个核心实体对象，包括但不限于：

- User (用户)
- Product (商品)
- Category (分类)
- Cart (购物车)
- Order (订单)
- Store (店铺)
- Address (地址)
- Review (评价)
- Announcement (公告)
- CustomerServiceSession (客服会话)
- CustomerServiceMessage (客服消息)
- SearchHistory (搜索历史)
- Favorite (收藏夹)

## 安装部署

### 环境要求

- JDK 11+
- MySQL 8.0+
- Maven 3.6+

### 数据库配置

1. 创建名为`shopping`的数据库
2. 在`application.yml`中配置数据库连接信息：
   ```yaml
   spring:
     datasource:
       url: jdbc:mysql://localhost:3305/shopping?useUnicode=true&characterEncoding=utf-8&serverTimezone=Asia/Shanghai
       username: 你的用户名
       password: 你的密码
   ```

### 启动步骤

1. 克隆代码仓库
2. 进入项目根目录
3. 执行`mvn clean install`构建项目
4. 执行`mvn spring-boot:run`或运行`ShoppingApplication`类启动应用
5. 访问`http://localhost:8080`进入系统

## 系统架构

本系统采用分层架构设计，主要包括：

- **控制层(Controller)**：处理HTTP请求，返回响应
- **服务层(Service)**：实现业务逻辑
- **数据访问层(Mapper/Repository)**：与数据库交互
- **实体层(Entity)**：数据模型
- **数据传输对象(DTO)**：数据传输
- **工具类(Utils)**：通用功能与帮助类
- **异常处理(Exception)**：全局异常处理
- **配置类(Config)**：系统配置

## 安全特性

- Spring Security认证框架
- JWT令牌认证
- 接口权限控制
- SQL注入防护
- XSS攻击防护
- CSRF防护
- 用户角色权限管理

## 性能优化

- 数据库索引优化
- 缓存策略
- 分页查询
- 延迟加载
- 批量处理
- 事务管理
