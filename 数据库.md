# 在线购物系统数据库设计

## 用户表 (users)
- id: 主键
- username: 用户名
- password: 密码
- phone: 手机号
- avatar: 头像URL
- role: 角色(管理员/商家/普通用户)
- status: 状态(启用/禁用)
- addresses: JSON格式存储收货地址
- create_time: 创建时间
- update_time: 更新时间

## 店铺表 (stores)
- id: 主键
- user_id: 店主ID
- name: 店铺名称
- logo: 店铺LOGO
- description: 店铺描述
- contact_info: 联系方式(JSON格式)
- license: 营业执照URL
- status: 状态(审核中/正常/关闭)
- create_time: 创建时间

## 商品分类表 (categories)
- id: 主键
- name: 分类名称
- parent_id: 父分类ID
- level: 分类层级
- status: 状态(启用/禁用)
- sort_order: 排序值

## 商品表 (products)
- id: 主键
- name: 商品名称
- store_id: 店铺ID
- category_id: 分类ID
- price: 价格
- stock: 库存
- description: 商品描述
- images: 图片URLs(JSON格式)
- detail: 商品详情
- specifications: 商品规格(JSON格式)
- status: 状态(上架/下架)
- sales: 销量
- rating: 平均评分
- create_time: 创建时间
- update_time: 更新时间

## 购物车表 (carts)
- id: 主键
- user_id: 用户ID
- product_id: 商品ID
- spec_info: 规格信息(JSON格式)
- quantity: 数量
- selected: 是否选中
- create_time: 创建时间

## 订单表 (orders)
- id: 主键
- order_no: 订单编号
- user_id: 用户ID
- store_id: 店铺ID
- items: 订单项(JSON格式，包含商品ID、名称、价格、数量等)
- total_amount: 总金额
- address_info: 收货地址信息(JSON格式)
- payment_type: 支付方式
- payment_time: 支付时间
- shipping_time: 发货时间
- status: 订单状态
- refund_status: 退款状态
- refund_reason: 退款原因
- create_time: 创建时间
- update_time: 更新时间

## 评论表 (reviews)
- id: 主键
- product_id: 商品ID
- user_id: 用户ID
- order_id: 订单ID
- content: 评论内容
- rating: 评分(1-5星)
- images: 图片URLs(JSON格式)
- reply: 商家回复
- status: 状态(审核中/显示/隐藏)
- is_top: 是否置顶
- create_time: 创建时间

## 公告表 (announcements)
- id: 主键
- title: 公告标题
- content: 公告内容
- publisher_id: 发布者ID
- status: 状态(显示/隐藏)
- read_users: 已读用户ID列表(JSON格式)
- create_time: 创建时间

## 收藏表 (favorites)
- id: 主键
- user_id: 用户ID
- product_id: 商品ID
- create_time: 创建时间

## 客服消息表 (customer_service_messages)
- id: 主键
- session_id: 会话ID
- user_id: 用户ID
- store_id: 店铺ID(商家作为客服)
- from_type: 发送方类型(用户/商家)
- content: 消息内容
- content_type: 内容类型(文本/图片/文件)
- read_status: 已读状态
- create_time: 创建时间

## 客服会话表 (customer_service_sessions)
- id: 主键
- user_id: 用户ID
- store_id: 店铺ID(商家作为客服)
- status: 会话状态(进行中/已结束)
- start_time: 开始时间
- end_time: 结束时间
- evaluation: 用户评价
- rating: 满意度评分

## 搜索历史表 (search_history)
- id: 主键
- user_id: 用户ID
- keyword: 搜索关键词
- result_count: 结果数量
- create_time: 搜索时间
